---
layout:     post                          # 使用的布局（不需要改）
title:      大一学年总结                   # 标题 
subtitle:   被各路神仙吊打并将持续吊打的过程 # 副标题
date:       2019-08-12                    # 时间
author:     小雨时宁                       # 作者
header-img: img/HelloWorld3.jpg           # 这篇文章标题背景图片
catalog: true                             # 是否归档
tags:                                     # 标签
    - C语言
    - 入门教学
---

## 前言

&emsp;&emsp;本教程供予Nova独游社大一新生入社教学用，故使用C语言实现了贪吃蛇的基本功能，可由玩家自己添加更多细节（得分，欢迎界面，颜色布局等）

## 完整代码

```c
#include<stdio.h>
#include<Windows.h>
 
 void InitializeGame();            // 初始化游戏地图  
 void PrintGame(int map[20][20]);  // 打印游戏  
 int SnakeMove(int map[20][20]);   // 蛇的移动  
 void MoveToPos(int x, int y);     // 移动打印  
 void RunTheGame();                // 进行游戏  
 void CreateFood(int map[20][20]); // 生成食物   
 int ChangeSnake();                // 改变蛇的方向   
 
 int map[20][20] = {0};
 int snakeNextMove = 1; // 1表示(0,-1)，2表示(0,1)，3表示(-1,0)，4表示(1,0) 
 int snakeLength = 4;   // 表示蛇的最长长度，也用来定位 
 int foodIsAte = 1;     // 开局产生食物 

 int main(void)
 {
 	InitializeGame();
 	RunTheGame();
 	return 0;
 }
 
 void RunTheGame()
 {
 	while(1)
 	{
 		int endOrContinue;
 		snakeNextMove = ChangeSnake();
 		system("cls");
 		endOrContinue = SnakeMove(map);
 		if(foodIsAte == 1)
 		{
 			CreateFood(map);
		}
		PrintGame(map);
		if(endOrContinue == -1)
		{
			break;
		}
		//snakeNextMove = ChangeSnake();
		Sleep(500);	
	}
 }
 
 void CreateFood(int map[20][20])
 {
 	int food_x;
 	int food_y;
 	srand((int)time(NULL));
 	while(1)
 	{
 		food_x = rand()%20;
 		food_y = rand()%20;
 		if(map[food_x][food_y] == 0)
 		{
 			break;
		}
	}
	map[food_x][food_y] = 1000;        //1000表示食物 
	foodIsAte = 0;
 }
 
 
 int ChangeSnake()
 {
 	char click;
 	if (_kbhit())
	{
		click = _getch();
	}
	if(click == 'w')
	{
		return 1;
	}
	else if(click == 's')
	{
		return 2;
	}
	else if(click == 'a')
	{
		return 3;
	}
	else if(click == 'd')
	{
		return 4;
	}
	else 
	{
		return snakeNextMove;
	}
 } 
 
 int SnakeMove(int map[20][20])
 {
 	int i, j;
 	int nowSnakeHead_x, nowSnakeHead_y, nowSnakeTail_x, nowSnakeTail_y;
	for(i = 0;i < 20;i++)
	{
		for(j = 0;j < 20;j++)
		{
			if(map[i][j] == 2)
			{
				nowSnakeHead_x = i;
				nowSnakeHead_y = j;	
			}
			if(map[i][j] == snakeLength + 1)
			{
				nowSnakeTail_x = i;
				nowSnakeTail_y = j;
			}	
		} 
	}
	
	if(snakeNextMove == 1)
	{
		nowSnakeHead_y -= 1;
	}
	else if(snakeNextMove == 2)
	{
		nowSnakeHead_y += 1;
	}
	else if(snakeNextMove == 3)
	{
		nowSnakeHead_x -= 1;
	}
	else
	{
		nowSnakeHead_x += 1;
	}
	
	if(map[nowSnakeHead_x][nowSnakeHead_y] > 0&&map[nowSnakeHead_x][nowSnakeHead_y] <= 361)
	{
		return -1;	
	}
	else
	{
		if(map[nowSnakeHead_x][nowSnakeHead_y] == 0) //空地
		{
			map[nowSnakeHead_x][nowSnakeHead_y] = 1;
			map[nowSnakeTail_x][nowSnakeTail_y] = 0;
			for(i = 0;i < 20;i++)
			{
				for(j = 0;j < 20;j++)
				{
					if(map[i][j] != 0&&map[i][j] > 1&&map[i][j] != 1000)
					{
						map[i][j]++;
					}
				}
			}
			map[nowSnakeHead_x][nowSnakeHead_y] += 1;
		} 
		else                  //吃到食物 
		{
			map[nowSnakeHead_x][nowSnakeHead_y] = 1;
			//map[nowSnakeTail_x][nowSnakeTail_y] = 0;
			snakeLength++; 
			foodIsAte = 1;
			for(i = 0;i < 20;i++)
			{
				for(j = 0;j < 20;j++)
				{
					if(map[i][j] != 0&&map[i][j] > 1&&map[i][j] != 1000)
					{
						map[i][j]++;
					}
				}
			}
			map[nowSnakeHead_x][nowSnakeHead_y] += 1;
		} 
		return 1;
	}		
 } 
 
 void PrintGame(int map[20][20])
 {
 	int i, j;
 	for(i = 0;i < 20;i++)
 	{
 		for(j = 0;j < 20;j++)
		{
			if(map[i][j] >= 1&&map[i][j] <= 361)
			{
				MoveToPos(i * 2, j);
				printf("■"); 
			}
			else if(map[i][j] == 1000)
			{
				MoveToPos(i * 2, j);
				printf("□");	
			} 
			/*
			else if(map[i][j] == 0)
			{
				MoveToPos(i * 2, j);
				printf("  ");	
			} 
			*/
			//拓展内容	
		}
	}
 }
 
 void InitializeGame()
 {
 	int i, j;
 	for(i = 0;i < 20;i++)
 	{
 		if(i == 0||i == 19)
 		{
 			for(j = 0;j < 20;j++)
			{
				map[i][j] = 1;	 	
			}	
		}
		else
		{
			map[i][0] = 1;
			map[i][19] = 1;
		} 		
	}
	
	map[8][7] = 2;   //1是尾部 
	map[8][8] = 3;
	map[8][9] = 4;
	map[8][10] = 5;  //4是头部 
 }
 
 void MoveToPos(int x, int y)
 {
	COORD pos;
	HANDLE hOutput;
	pos.X = x;
	pos.Y = y;
	hOutput = GetStdHandle(STD_OUTPUT_HANDLE);
	SetConsoleCursorPosition(hOutput, pos);
 }

```
